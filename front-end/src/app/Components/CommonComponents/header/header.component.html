<!-- header.component.html -->
<header>
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid px-4">
      <!-- Logo -->
      <a class="navbar-brand text-light" routerLink="/" (click)="goHomepage()">CAESARZON</a>

      <!-- Barra di ricerca -->
      <div class="search-container">
        <input type="text" placeholder="Cerca..." class="form-control search-input">
        <button class="btn search-btn">
          <i class="bi bi-search"></i>
        </button>
      </div>

      <!-- Navigazione -->
      <div class="nav-links d-none d-md-flex">
        <a routerLink="/" class="nav-item">Home</a>
        <a routerLink="/catalogo" class="nav-item">Catalogo</a>
        <a *ngIf="isAdmin" routerLink="/admin" class="nav-item">Admin</a>
      </div>

      <!-- Icone utente -->
      <div class="user-actions">
        <a *ngIf="isLoggedIn" routerLink="/carrello" class="icon-link">
          <i class="bi bi-cart3"></i>
          <span *ngIf="cartItemCount > 0" class="cart-badge">{{cartItemCount}}</span>
        </a>
        <button *ngIf="!isLoggedIn" class="btn login-btn" (click)="openLoginPopup()">
          Accedi
        </button>
        <div *ngIf="isLoggedIn" class="user-menu">
          <span class="user-name">{{userName}}</span>
          <button class="btn logout-btn" (click)="logout()">Esci</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Popup di login -->
  <div *ngIf="showPopup" class="login-popup-overlay">
    <div class="login-popup">
      <button class="close-btn" (click)="closeLoginPopup()">Ã—</button>
      <app-login (loginSuccess)="onLoginSuccess()"></app-login>
    </div>
  </div>
</header>
