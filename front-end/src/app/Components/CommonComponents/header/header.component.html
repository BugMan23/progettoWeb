<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<!-- TODO: DA RIVEDERE -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Il tuo E-commerce</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<header>
  <nav class="navbar navbar-expand-md navbar-light custom-navbar">
    <h1 class="navbar-brand text-light logo" style="cursor: pointer" (click)="goHomepage()">CAESARZON</h1>

    <div class="search-container d-flex flex-row align-items-center">
      <input type="text" placeholder="Cerca..."> <!-- TODO: Add [(ngModel)]="this.productService.ricerca" functionality -->
      <button class="btn btn-dark custom-btn ml-1" type="submit">Cerca</button> <!-- TODO: Add (click)="productService.getProducts()" functionality -->
    </div>

    <ul class="navbar-nav ml-auto">
      <!-- Notifiche visibili solo se l'utente è loggato -->
      <li class="nav-item" *ngIf="authService.isLoggedIn()">
        <div id="notiche">
          <div class="notifications-container">
            <button class="notification-button mr-1">
              <img src="assets/images/bell.png" alt="Icona notifiche" height="24" width="24">
              <!-- Se hai un contatore notifiche in una proprietà notifyCount, mostrala qui -->
            </button>
            <div class="notification-menu">
              <p class="notification-item ml-5">Non hai nessuna notifica</p>
            </div>
          </div>
        </div>
      </li>

      <!-- Utente NON loggato -->
      <li class="nav-item" *ngIf="!authService.isLoggedIn()">
        <button class="menu-item btn btn-dark custom-btn" (click)="openLoginPopup()">
          Accedi
        </button>
      </li>

      <!-- Utente loggato, NON admin -->
      <li class="nav-item dropdown" *ngIf="authService.isLoggedIn() && !authService.isAdmin()">
        <button
          class="menu-item btn btn-dark custom-btn dropdown-toggle"
          type="button"
          data-toggle="dropdown">
          Profilo
        </button>
          <div class="dropdown-menu">
            <!-- Placeholder links, replace with actual functionality -->
            <a class="dropdown-item">Anagrafica</a>
            <a class="dropdown-item">Indirizzi</a>
            <a class="dropdown-item">Metodi di pagamento</a>
            <a class="dropdown-item">Lista dei desideri</a>
            <a class="dropdown-item">Ordini</a>
            <a class="dropdown-item">Assistenza</a>
            <a class="dropdown-item">Esci</a>
          </div>
      </li>

      <!-- Utente loggato, admin -->
      <li class="nav-item dropdown" *ngIf="authService.isLoggedIn() && authService.isAdmin()">
        <button
          class="menu-item btn btn-dark custom-btn dropdown-toggle"
          type="button"
          data-toggle="dropdown">
          Gestisci
        </button>
        <div class="dropdown-menu">
          <a class="dropdown-item">Gestione Prodotti</a>
          <a class="dropdown-item">Gestione Utenti</a>
          <a class="dropdown-item">Ordini</a>
          <a class="dropdown-item" (click)="authService.logout()">Esci</a>
        </div>
      </li>
  </ul>
</nav>

  <nav id="secondNav" class="navbar navbar-expand-md navbar-light d-flex flex-column align-items-center">
    <button class="navbar-toggler btn btn-dark custom-btn" type="button">
      <span class="navbar-toggler-icon"></span> <!-- TODO: Add (click)="toggleMenu()" functionality -->
    </button>
  </nav>
</header>
</body>
</html>
